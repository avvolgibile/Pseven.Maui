<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:syncfusion="clr-namespace:Syncfusion.Maui.DataGrid;assembly=Syncfusion.Maui.DataGrid"
             x:Class="Pseven.Views.StoricoDocumentiPage"
             Title="Storico Documenti">

    <Grid RowDefinitions="Auto,*,Auto" Padding="10">

        <!-- FILTRI IN ALTO -->
        <Grid ColumnDefinitions="*,*,*,*,*" ColumnSpacing="10" RowDefinitions="Auto,Auto" Margin="0,0,0,10">
            <Label Text="Cliente" Grid.Column="0" />
            <Picker Grid.Column="0" Grid.Row="1" ItemsSource="{Binding Clienti}" SelectedItem="{Binding ClienteSelezionato}" />

            <Label Text="Agente" Grid.Column="1" />
            <Picker Grid.Column="1" Grid.Row="1" ItemsSource="{Binding Agenti}" SelectedItem="{Binding AgenteSelezionato}" />

            <Label Text="Zona" Grid.Column="2" />
            <Picker Grid.Column="2" Grid.Row="1" ItemsSource="{Binding Zone}" SelectedItem="{Binding ZonaSelezionata}" />

            <Label Text="Dal" Grid.Column="3" />
            <DatePicker Grid.Column="3" Grid.Row="1" Date="{Binding DataInizio}" />

            <Label Text="Al" Grid.Column="4" />
            <DatePicker Grid.Column="4" Grid.Row="1" Date="{Binding DataFine}" />
        </Grid>

        <!-- BOTTONI IN ALTO A DESTRA -->
        <HorizontalStackLayout Grid.Row="0" HorizontalOptions="End" Spacing="10" Margin="0,50,0,10">
            <Button Text="Ordini" Command="{Binding MostraOrdiniCommand}" BackgroundColor="Orange" TextColor="White"/>
            <Button Text="Preventivi" Command="{Binding MostraPreventiviCommand}" BackgroundColor="Yellow" TextColor="Black"/>
            <Button Text="Stor Art" Command="{Binding ApriStoricoArticoliCommand}" BackgroundColor="Yellow" TextColor="Black"/>
        </HorizontalStackLayout>

        <!-- DATAGRID -->
        <syncfusion:SfDataGrid x:Name="StoricoDataGrid"
                               Grid.Row="1"
                               ItemsSource="{Binding StoricoDocumenti}"
                             
                              SelectionChanged="DataGrid_SelectionChanged"
                               
                               SelectionMode="Single"
                             
                               GridLinesVisibility="Both">
            <syncfusion:SfDataGrid.Columns>
                <syncfusion:DataGridTextColumn MappingName="RagioneSocialeRiga" HeaderText="Ragione Sociale" Width="200"/>
                <syncfusion:DataGridTextColumn MappingName="Citta" HeaderText="CittÃ " Width="120"/>
                <syncfusion:DataGridTextColumn MappingName="Prov" HeaderText="Prov" Width="80"/>
                <syncfusion:DataGridNumericColumn MappingName="Importo" HeaderText="Importo" Format="C2" Width="120"/>
                <syncfusion:DataGridDateColumn MappingName="Data" HeaderText="Data" Format="dd/MM/yyyy" Width="120"/>
                <syncfusion:DataGridTextColumn MappingName="NoteDocumento" HeaderText="Note Documento" Width="200"/>
                <syncfusion:DataGridTextColumn MappingName="NoteCliente" HeaderText="Note Cliente" Width="200"/>
                <syncfusion:DataGridTextColumn MappingName="NumeroDoc" HeaderText="Numero Doc" Width="120"/>
            </syncfusion:SfDataGrid.Columns>

            <FlyoutBase.ContextFlyout>
                <MenuFlyout >
                    <MenuFlyoutItem Text="Elimina"
                 Command="{Binding EliminaCommand}"
                 CommandParameter="{Binding DgwItemselezionatoConTastoDx}" />
                    <MenuFlyoutSeparator></MenuFlyoutSeparator>
                    <MenuFlyoutItem Text="Esporta"
                    Command="{Binding EsportaCommand}"
                    CommandParameter="{Binding DgwItemselezionatoConTastoDx}" />

                </MenuFlyout>
            </FlyoutBase.ContextFlyout>



        </syncfusion:SfDataGrid>

        <!-- TOTALE IN BASSO -->
        <Grid Grid.Row="2" ColumnDefinitions="*,Auto" Margin="0,10,0,0">
            <Label Text="Tot. Prev:" VerticalOptions="Center" HorizontalOptions="End" Grid.Column="0"/>
            <Entry Text="{Binding TotalePrev, StringFormat='{}{0:C2}'}"
                   IsReadOnly="True"
                   Grid.Column="1"
                   BackgroundColor="LightYellow"
                   HorizontalOptions="End"
                   WidthRequest="150"/>
        </Grid>

    </Grid>
</ContentPage>